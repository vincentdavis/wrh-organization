(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b631488"],{"0fd9":function(e,t,i){"use strict";var n=i("ade3"),a=i("5530"),s=(i("13d5"),i("d3b7"),i("caad"),i("2532"),i("99af"),i("b64b"),i("ac1f"),i("5319"),i("4ec9"),i("3ca3"),i("ddb0"),i("4160"),i("159b"),i("4b85"),i("2b0e")),r=i("d9f7"),o=i("80d2"),l=["sm","md","lg","xl"],c=["start","end","center"];function u(e,t){return l.reduce((function(i,n){return i[e+Object(o["H"])(n)]=t(),i}),{})}var d=function(e){return[].concat(c,["baseline","stretch"]).includes(e)},m=u("align",(function(){return{type:String,default:null,validator:d}})),h=function(e){return[].concat(c,["space-between","space-around"]).includes(e)},p=u("justify",(function(){return{type:String,default:null,validator:h}})),f=function(e){return[].concat(c,["space-between","space-around","stretch"]).includes(e)},v=u("alignContent",(function(){return{type:String,default:null,validator:f}})),b={align:Object.keys(m),justify:Object.keys(p),alignContent:Object.keys(v)},g={align:"align",justify:"justify",alignContent:"align-content"};function _(e,t,i){var n=g[e];if(null!=i){if(t){var a=t.replace(e,"");n+="-".concat(a)}return n+="-".concat(i),n.toLowerCase()}}var y=new Map;t["a"]=s["default"].extend({name:"v-row",functional:!0,props:Object(a["a"])(Object(a["a"])(Object(a["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d}},m),{},{justify:{type:String,default:null,validator:h}},p),{},{alignContent:{type:String,default:null,validator:f}},v),render:function(e,t){var i=t.props,a=t.data,s=t.children,o="";for(var l in i)o+=String(i[l]);var c=y.get(o);return c||function(){var e,t;for(t in c=[],b)b[t].forEach((function(e){var n=i[e],a=_(t,e,n);a&&c.push(a)}));c.push((e={"no-gutters":i.noGutters,"row--dense":i.dense},Object(n["a"])(e,"align-".concat(i.align),i.align),Object(n["a"])(e,"justify-".concat(i.justify),i.justify),Object(n["a"])(e,"align-content-".concat(i.alignContent),i.alignContent),e)),y.set(o,c)}(),e(i.tag,Object(r["a"])(a,{staticClass:"row",class:c}),s)}})},1681:function(e,t,i){},"2c64":function(e,t,i){},"3d86":function(e,t,i){},"43a6":function(e,t,i){"use strict";var n=i("5530"),a=(i("a9e3"),i("ec29"),i("3d86"),i("c37a")),s=i("604c"),r=i("58df"),o=Object(r["a"])(s["a"],a["a"]);t["a"]=o.extend({name:"v-radio-group",provide:function(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},a["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row})}},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},a["a"].options.methods.genDefaultSlot.call(this))},genInputSlot:function(){var e=a["a"].options.methods.genInputSlot.call(this);return delete e.data.on.click,e},genLabel:function(){var e=a["a"].options.methods.genLabel.call(this);return e?(e.data.attrs.id=this.computedId,delete e.data.attrs["for"],e.tag="legend",e):null},onClick:s["a"].options.methods.onClick},render:function(e){var t=a["a"].options.render.call(this,e);return this._b(t.data,"div",this.attrs$),t}})},"4bd4":function(e,t,i){"use strict";var n=i("5530"),a=(i("caad"),i("2532"),i("07ac"),i("4de4"),i("d3b7"),i("4160"),i("159b"),i("4795"),i("7db0"),i("58df")),s=i("7e2b"),r=i("3206");t["a"]=Object(a["a"])(s["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,i=function(e){return e.$watch("hasError",(function(i){t.$set(t.errorBag,e._uid,i)}),{immediate:!0})},n={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=e.$watch("shouldValidate",(function(a){a&&(t.errorBag.hasOwnProperty(e._uid)||(n.valid=i(e)))})):n.valid=i(e),n},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var i=this.watchers.find((function(e){return e._uid===t._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots["default"])}})},5311:function(e,t,i){"use strict";var n=i("5607"),a=i("2b0e");t["a"]=a["default"].extend({name:"rippleable",directives:{ripple:n["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}})},"67b6":function(e,t,i){"use strict";var n=i("15fd"),a=i("5530"),s=(i("b0c0"),i("2c64"),i("ba87")),r=i("9d26"),o=i("c37a"),l=i("7e2b"),c=i("a9ad"),u=i("4e82"),d=i("5311"),m=i("7560"),h=i("fe09"),p=i("80d2"),f=i("58df"),v=i("d9f7"),b=["title"],g=Object(f["a"])(l["a"],c["a"],d["a"],Object(u["a"])("radioGroup"),m["a"]);t["a"]=g.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:function(){return{isFocused:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses),this.groupClasses)},computedColor:function(){return h["a"].options.computed.computedColor.call(this)},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},computedId:function(){return o["a"].options.computed.computedId.call(this)},hasLabel:o["a"].options.computed.hasLabel,hasState:function(){return(this.radioGroup||{}).hasState},isDisabled:function(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly:function(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName:function(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-".concat(this.radioGroup._uid)},rippleState:function(){return h["a"].options.computed.rippleState.call(this)},validationState:function(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput:function(e){return h["a"].options.methods.genInput.call(this,"radio",e)},genLabel:function(){return this.hasLabel?this.$createElement(s["a"],{on:{click:h["b"]},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},Object(p["t"])(this,"label")||this.label):null},genRadio:function(){var e=this.attrs$,t=(e.title,Object(n["a"])(e,b));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(r["a"],this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput(Object(a["a"])({name:this.computedName,value:this.value},t)),this.genRipple(this.setTextColor(this.rippleState))])},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e)},onChange:function(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:function(){}},render:function(e){var t={staticClass:"v-radio",class:this.classes,on:Object(v["c"])({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return e("div",t,[this.genRadio(),this.genLabel()])}})},"6ba2":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"turnstileBoxRef",attrs:{id:"turnstile-box"}})},a=[],s=i("ed09"),r=Object(s["h"])({name:"TurnstileComponent",props:{sitekey:{type:String,required:!0}},emits:{verify:function(e){return null!==e&&""!==e},expire:null,fail:null,timeout:null},setup:function(e,t){var i=Object(s["J"])(null);window.onloadTurnstileCallback=function(){n()},Object(s["A"])((function(){if(window.turnstile)n();else{var e=document.createElement("script");e.src="https://challenges.cloudflare.com/turnstile/v0/api.js?onload=onloadTurnstileCallback",e.async=!0,e.defer=!0,document.head.appendChild(e)}}));var n=function(){var n;null===(n=window.turnstile)||void 0===n||n.render("#".concat(i.value.id),{sitekey:e.sitekey,callback:function(e){return t.emit("verify",e)},"expired-callback":function(){return t.emit("expire")},"error-callback":function(){return t.emit("fail")},"timeout-callback":function(){return t.emit("timeout")}})},a=function(){var e;null===(e=window.turnstile)||void 0===e||e.reset("#".concat(i.value.id))};return{reset:a,turnstileBoxRef:i}}}),o=r,l=i("2877"),c=Object(l["a"])(o,n,a,!1,null,"19d06164",null);t["a"]=c.exports},"6ca7":function(e,t,i){},"6cb4":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.organization?i("v-card",[i("v-card-title",{staticClass:"headline",class:{"pt-1 pb-1":e.organization.logo}},[e._v(" "+e._s(e.alreadyJoined?"Re-Join":"Join")+" to "),i("span",{staticClass:"ml-2 font-weight-bold"},[e._v(" "+e._s(e.organization.name))]),i("v-spacer"),e.organization.logo?i("v-avatar",{staticClass:"avatar-center",attrs:{size:"60",color:"black"}},[i("v-img",{attrs:{src:e.organization.logo}})],1):e._e()],1),i("v-divider"),i("v-form",{staticClass:"mt-3",on:{submit:function(t){return t.preventDefault(),e.onSubmit()}},model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[i("v-card-text",[e.$store.getters.isAuthenticated?[i("h3",{staticClass:"mb-2"},[e._v(" 1. You Have an account on WRH. "),i("v-icon",{attrs:{color:"success"}},[e._v(e._s(e.icons.mdiAccountCheck))]),i("span",{staticClass:"caption"},[e._v(" (logged in by "),i("span",{staticClass:"primary--text font-weight-bold"},[e._v(e._s(e.$store.state.currentUser.username))]),e._v(") ")])],1)]:"sign-up"==e.accountMode?[i("h3",{staticClass:"mb-2"},[e._v(" 1. Sign up on WRH: "),i("span",{staticClass:"caption"},[e._v(" (already have an account? "),i("a",{attrs:{href:"javascript:"},on:{click:function(t){e.accountMode="sign-in",e.isPasswordVisible=!1}}},[e._v("Sign in")]),e._v(") ")])]),i("v-row",[i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{outlined:"","append-icon":e.icons.mdiEmailOutline,label:"E-mail (Username)",placeholder:"E-mail (Username)","persistent-hint":"",hint:"The E-mail will be used as your username on the login",rules:[e.rules.required,e.rules.emailValidator],dense:""},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{outlined:"","append-icon":e.icons.mdiEmailOutline,label:"Confirm E-mail",placeholder:"Enter E-mail again","persistent-hint":"",rules:[e.rules.required,e.rules.emailValidator,e.rules.confirmedValidator(e.registerForm.confirm_email,e.registerForm.email,"The Confirm E-mail field confirmation does not match")],dense:""},model:{value:e.registerForm.confirm_email,callback:function(t){e.$set(e.registerForm,"confirm_email",t)},expression:"registerForm.confirm_email"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{outlined:"",label:"First Name",placeholder:"First Name","hide-details":"",rules:[e.rules.required],dense:""},model:{value:e.registerForm.first_name,callback:function(t){e.$set(e.registerForm,"first_name",t)},expression:"registerForm.first_name"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{outlined:"",label:"Last Name",placeholder:"Last Name","hide-details":"",rules:[e.rules.required],dense:""},model:{value:e.registerForm.last_name,callback:function(t){e.$set(e.registerForm,"last_name",t)},expression:"registerForm.last_name"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{outlined:"",type:e.isPasswordVisible?"text":"password",label:"Password",placeholder:"Password","append-icon":e.isPasswordVisible?e.icons.mdiEyeOffOutline:e.icons.mdiEyeOutline,hint:"Password should contains at least 1 digit with min 8 chars","persistent-hint":"",rules:[e.rules.required],dense:""},on:{"click:append":function(t){e.isPasswordVisible=!e.isPasswordVisible}},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{outlined:"",type:e.isPasswordVisible?"text":"password",label:"Confirm Password",placeholder:"Confirm Password","append-icon":e.isPasswordVisible?e.icons.mdiEyeOffOutline:e.icons.mdiEyeOutline,rules:[e.rules.required,e.rules.confirmedValidator(e.registerForm.confirm_password,e.registerForm.password)],dense:""},on:{"click:append":function(t){e.isPasswordVisible=!e.isPasswordVisible}},model:{value:e.registerForm.confirm_password,callback:function(t){e.$set(e.registerForm,"confirm_password",t)},expression:"registerForm.confirm_password"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[i("v-select",{attrs:{outlined:"",items:e.$const.GENDER_OPTIONS,"item-text":"title","item-value":"value",label:"Gender",dense:"","hide-details":"",rules:[e.rules.required]},model:{value:e.registerForm.gender,callback:function(t){e.$set(e.registerForm,"gender",t)},expression:"registerForm.gender"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-menu",{ref:"birthDateMenuRef",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[i("v-text-field",e._g(e._b({attrs:{label:"Birth Date","append-icon":e.icons.mdiCalendar,readonly:"",rules:[e.rules.required],outlined:"","hide-details":"",dense:""},model:{value:e.registerForm.birth_date,callback:function(t){e.$set(e.registerForm,"birth_date",t)},expression:"registerForm.birth_date"}},"v-text-field",a,!1),n))]}}],null,!1,3701623122),model:{value:e.showBirthDateMenu,callback:function(t){e.showBirthDateMenu=t},expression:"showBirthDateMenu"}},[i("v-date-picker",{ref:"birthDatePickerRef",attrs:{"active-picker":e.birthDateActivePicker,max:(new Date).toISOString().slice(0,10),min:"1940-01-01",color:"primary"},on:{"update:activePicker":function(t){e.birthDateActivePicker=t},"update:active-picker":function(t){e.birthDateActivePicker=t},change:function(t){e.$refs.birthDateMenuRef.save(t)}},model:{value:e.registerForm.birth_date,callback:function(t){e.$set(e.registerForm,"birth_date",t)},expression:"registerForm.birth_date"}})],1)],1)],1)]:[i("h3",{staticClass:"mb-2"},[e._v(" 1. Sign in on WRH: "),i("span",{staticClass:"caption"},[e._v(" (don't have account? "),i("a",{attrs:{href:"javascript:"},on:{click:function(t){e.accountMode="sign-up",e.isPasswordVisible=!1}}},[e._v("Sign up")]),e._v(") ")])]),i("v-text-field",{staticClass:"mb-2",attrs:{outlined:"",dense:"",label:"Username",placeholder:"Username","hide-details":"",rules:[e.rules.required]},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}}),i("v-text-field",{staticClass:"mb-2",attrs:{outlined:"",dense:"",type:e.isPasswordVisible?"text":"password","append-icon":e.isPasswordVisible?e.icons.mdiEyeOffOutline:e.icons.mdiEyeOutline,label:"Password",placeholder:"Password","hide-details":"",rules:[e.rules.required]},on:{"click:append":function(t){e.isPasswordVisible=!e.isPasswordVisible}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),i("v-btn",{attrs:{block:"",type:"button",color:"primary",loading:e.logining},on:{click:function(t){return e.login()}}},[e._v(" Login ")])]],2),i("v-divider"),e.schema?i("v-card-text",{class:{disabled:"sign-in"==e.accountMode}},[i("h3",{staticClass:"mb-2"},[e._v(" 2. Fill out organization form: ")]),i("member-fields-schema-cmp",{attrs:{schema:e.schema,"member-fields":e.memberFields}})],1):e._e(),i("v-divider"),i("v-card-text",{class:{disabled:"sign-in"==e.accountMode}},[i("h3",{staticClass:"mb-2"},[e._v(" 3. Choose a membership plan: ")]),e.membershipPlans&&!e.membershipPlans.length?i("v-alert",{staticClass:"mt-2 text-center",attrs:{dense:"",text:"",color:"warning"}},[i("p",[e._v("No membership plan defined on this organiztion.")]),i("p",[e._v("You cannot join!")])]):e._e(),e.currentMembership&&e.currentMembership.is_admin?i("v-alert",{attrs:{dense:"",color:"error",text:""}},[i("p",{staticClass:"mb-1"},[e._v(" You are an "),i("v-chip",{attrs:{small:"",color:"info"}},[e._v("Admin")]),e._v(" member of this organization. ")],1),i("p",{staticClass:"mb-1"},[e._v("Your membership plan won't expire unless the organization drops your grant!")]),i("p",{staticClass:"mb-1"},[e._v(" You dont need to renew your membership! ")])]):e.alreadyJoined&&!e.currentMembership.is_admin?i("v-alert",{attrs:{dense:"",color:"info",text:""}},[i("p",{staticClass:"mb-1"},[e._v(" You have an "),e.currentMembership.is_expiring?i("v-chip",{attrs:{small:"",color:"warning"}},[e._v("Expiring")]):e._e(),e._v(" active plan. ")],1),i("p",{staticClass:"mb-1"},[e._v("Your plan date will be extended to the newly selected plan if you rejoin again.")]),i("p",{staticClass:"mb-1"},[e._v(" Your current plan expires on: "),i("strong",[e._v(e._s(e.currentMembership.exp_date?e.$utils.formatDate(e.currentMembership.exp_date,"MMM D, YYYY"):"Never!"))])])]):e._e(),i("v-row",{staticClass:"mb-1"},e._l(e.membershipPlans||[],(function(t){return i("v-col",{key:t.id,attrs:{cols:"12",md:"4"}},[i("v-card",{class:{"selected-plan":e.selectedPlan&&e.selectedPlan.id==t.id},attrs:{elevation:e.selectedPlan&&e.selectedPlan.id==t.id?10:6,color:e.selectedPlan&&e.selectedPlan.id==t.id?"warning":"light"},on:{click:function(i){e.selectedPlan=t}}},[i("v-card-text",[e.currentMembership&&e.currentMembership.membership_plan&&e.currentMembership.membership_plan.id==t.id?i("v-chip",{staticClass:"current-plan-label",attrs:{color:"info",label:"",small:""}},[e._v("Current")]):e._e(),i("div",{staticClass:"text-center"},[i("h1",{staticClass:"text-2xl font-weight-medium"},[e._v(" "+e._s((e.$const.ORGANIZATION_MEMBERSHIP_PLAN_MAP[t.period]||{}).title||t.period)+" ")]),i("p",[e._v(e._s(t.title||"-"))])]),i("div",{staticClass:"text-center"},[i("sup",{staticClass:"text-sm text-primary"},[e._v("$")]),i("span",{staticClass:"pricing-basic-value text-5xl primary--text font-weight-semibold"},[e._v(" "+e._s(t.price)+" ")])])],1)],1)],1)})),1)],1),i("v-card-text",{class:{disabled:"sign-in"==e.accountMode}},[i("h5",{staticClass:"mb-2"},[e._v(" Please donate to support this We Race Here project and Bicycle Colorado: ")]),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{type:"number",label:"Donate value:",prefix:"$",min:"0",outlined:"",dense:"","hide-details":""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[i("v-btn-toggle",{ref:"donateBtnGroupRef",staticClass:"donate-btn-group",model:{value:e.donateValue,callback:function(t){e.donateValue=t},expression:"donateValue"}},e._l([5,10,20,50,100],(function(t){return i("v-btn",{key:t,staticClass:"donate-btn",attrs:{value:t,color:"success",outlined:""}},[e._v(" $"+e._s(t)+" ")])})),1)]},proxy:!0}],null,!1,2952392256),model:{value:e.donateValue,callback:function(t){e.donateValue=t},expression:"donateValue"}})],1)],1)],1),e.membershipPrice?i("v-card-text",{class:{disabled:"sign-in"==e.accountMode}},[i("v-row",{staticClass:"mb-1"},[i("v-col",{attrs:{cols:"12"}},[i("h4",[e._v("You will be charged "),i("strong",{staticClass:"error--text"},[e._v("$"+e._s(e.membershipPrice))]),e._v(" to join this organization:")])])],1),e.stripePubKey?i("stripe-element-card",{ref:"cardPaymentRef",attrs:{pk:e.stripePubKey},on:{token:e.tokenCreated,error:function(t){return e.joining=!1},"element-ready":function(){return e.stripeElementIsReady=!0}}}):e._e()],1):e._e(),i("v-divider"),i("v-card-actions",[e.turnstileSiteKey?i("turnstile-component",{ref:"turnstileCmpRef",attrs:{id:"signup-and-join-turnstile-widget",sitekey:e.turnstileSiteKey},on:{verify:e.onVerifyTurnstile,expire:function(t){return e.$refs.turnstileCmpRef.reset()},fail:e.onFailTurnstile,timeout:e.onFailTurnstile}}):e._e(),i("v-spacer"),i("v-btn",{attrs:{color:"secondary",outlined:"",to:{name:e.$rns.PUBLIC_ORG_PROFILE,params:{record_id:e.organization.id}}}},[e._v("Cancel")]),i("v-btn",{attrs:{type:"submit",color:"primary",loading:e.joining,disabled:!e.formValid||!!e.membershipPrice&&!e.stripeElementIsReady||!e.selectedPlan||"sign-in"==e.accountMode||!e.turnstileToken||e.currentMembership&&e.currentMembership.is_admin}},[e._v(" "+e._s(e.alreadyJoined?"Re-Join":"Join")+" ")])],1)],1)],1):e._e()],1)},a=[],s=(i("4795"),i("4160"),i("d3b7"),i("159b"),i("b0c0"),i("94ed")),r=i("ed09"),o=i("bb36"),l=i("cbec"),c=i("7f98"),u=i("acaf"),d=i("2405"),m=i("4360"),h=i("a18c"),p=i("d3e3"),f=i("6ba2"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",[e.schema.length?e._e():i("v-col",{attrs:{cols:"12"}},[i("span",{staticClass:"caption"},[e._v("There is no form to fill out at this organization!")])]),e._l(e.schema,(function(t){return i("v-col",{key:t.name,attrs:{cols:"12",md:"text"==t.type||t.choices&&t.choices.length>0?12:6}},[t.choices&&t.choices.length>0?[i("p",{staticClass:"caption mb-0"},[e._v(e._s(t.title)+":")]),t.multiple?i("div",{staticClass:"d-flex flex-wrap demo-space-x mt-0"},e._l(t.choices,(function(n,a){return i("v-checkbox",{key:a,staticClass:"mt-0 mb-0 pt-0",attrs:{label:n.title,value:n.value,"hide-details":""},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}})})),1):i("v-radio-group",{staticClass:"mt-0",attrs:{"hide-details":"",rules:t.required?[e.rules.required]:[]},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}},[i("div",{staticClass:"d-flex flex-wrap demo-space-x mt-0"},e._l(t.choices,(function(e,t){return i("v-radio",{key:t,staticClass:"mt-0 mb-0 pt-0",attrs:{label:e.title,value:e.value}})})),1)])]:"integer"==t.type||"float"==t.type||"number"==t.type?[i("v-text-field",{attrs:{dense:"",label:t.title,type:"number",step:"integer"==t.type?1:"any",rules:t.required?[e.rules.required]:[]},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,e._n(i))},expression:"memberFields[f.name]"}})]:"percent"==t.type?[i("v-text-field",{attrs:{dense:"",label:t.title,rules:t.required?[e.rules.required]:[],type:"number",suffix:"%",min:"0",max:"100"},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,e._n(i))},expression:"memberFields[f.name]"}})]:"boolean"==t.type?[i("v-switch",{staticClass:"pt-0 mt-1",attrs:{label:t.title,dense:""},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}})]:"date"==t.type||"time"==t.type?[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(n){var a=n.on,s=n.attrs;return[i("v-text-field",e._g(e._b({staticClass:"pt-0 mt-0 mb-5",attrs:{label:t.title,rules:t.required?[e.rules.required]:[],"append-icon":"time"==t.type?e.icons.mdiClockOutline:e.icons.mdiCalendar,readonly:""},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}},"v-text-field",s,!1),a))]}}],null,!0),model:{value:e.uiFieldsData["menu__"+t.name],callback:function(i){e.$set(e.uiFieldsData,"menu__"+t.name,i)},expression:"uiFieldsData[`menu__${f.name}`]"}},["time"==t.type?i("v-time-picker",{attrs:{color:"primary"},on:{"click:minute":function(i){e.uiFieldsData["menu__"+t.name]=!1}},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}}):i("v-date-picker",{attrs:{color:"primary"},on:{input:function(i){e.uiFieldsData["menu__"+t.name]=!1}},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}})],1)]:"datetime"==t.type?[i("v-datetime-picker",{attrs:{label:t.title,"text-field-props":{appendIcon:e.icons.mdiCalendar,class:"pt-0 mt-0 mb-5",rules:t.required?[e.rules.required]:[]}},scopedSlots:e._u([{key:"dateIcon",fn:function(){return[i("v-icon",[e._v(e._s(e.icons.mdiCalendar))])]},proxy:!0},{key:"timeIcon",fn:function(){return[i("v-icon",[e._v(e._s(e.icons.mdiClock))])]},proxy:!0}],null,!0),model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}})]:"text"==t.type?[i("v-textarea",{attrs:{dense:"",label:t.title,rules:t.required?[e.rules.required]:[],rows:"2"},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,i)},expression:"memberFields[f.name]"}})]:[i("v-text-field",{attrs:{dense:"",label:t.title,rules:t.required?[e.rules.required]:[],type:"text"},model:{value:e.memberFields[t.name],callback:function(i){e.$set(e.memberFields,t.name,"string"===typeof i?i.trim():i)},expression:"memberFields[f.name]"}})]],2)}))],2)},b=[],g={props:{memberFields:{type:Object,required:!0},schema:{type:Array,required:!0}},setup:function(e,t){return{rules:{required:c["d"],confirmedValidator:c["a"],emailValidator:c["b"]},icons:{mdiCalendar:s["u"]}}}},_=g,y=i("2877"),C=i("6544"),w=i.n(C),x=i("ac7c"),k=i("62ad"),O=i("2e4b"),j=i("132d"),F=i("e449"),V=i("67b6"),S=i("43a6"),$=i("0fd9"),I=i("b73d"),P=i("8654"),E=i("a844"),D=i("c964"),B=Object(y["a"])(_,v,b,!1,null,"2599b936",null),R=B.exports;w()(B,{VCheckbox:x["a"],VCol:k["a"],VDatePicker:O["a"],VIcon:j["a"],VMenu:F["a"],VRadio:V["a"],VRadioGroup:S["a"],VRow:$["a"],VSwitch:I["a"],VTextField:P["a"],VTextarea:E["a"],VTimePicker:D["a"]});var A={components:{MemberFieldsSchemaCmp:R,TurnstileComponent:f["a"],StripeElementCard:u["StripeElementCard"]},props:{},setup:function(e,t){var i=Object(d["e"])(),n=i.route,a=i.router,u=Object(r["J"])(!1),f=Object(r["J"])({}),v=Object(r["J"])(!1),b=Object(r["J"])(null),g=Object(r["J"])(null),_=Object(r["J"])(!1),y=Object(r["J"])({}),C=Object(r["J"])({}),w=Object(r["J"])(null),x=Object(r["J"])(null),k=Object(r["J"])(!1),O=Object(r["J"])(null),j=Object(r["J"])(null),F=Object(r["J"])(null),V=Object(r["J"])(null),S=Object(r["J"])(!1),$=Object(r["J"])({}),I=Object(r["J"])(null),P=Object(r["J"])(!1),E=Object(r["J"])("sign-up"),D=Object(r["J"])({}),B=Object(r["J"])({}),R=Object(r["J"])(null),A=n.value.params.record_id,T=Object(r["b"])((function(){return 1*((x.value||{}).price||0)+1*(j.value||0)})),M=Object(r["b"])((function(){return!!w.value&&!w.value.is_expired}));Object(r["Y"])(v,(function(e){e&&setTimeout((function(){return b.value="YEAR"}))})),Object(r["A"])((function(){J(),N(),U(),p["a"].on("user:change-state",q)})),Object(r["D"])((function(){p["a"].off("user:change-state",q)}));var J=function(){o["a"].get("cycling_org/global_conf").then((function(e){R.value=e.data.TURNSTILE_SITE_KEY,F.value=e.data.STRIPE_PUBLISHABLE_KEY}),(function(e){Object(l["notifyDefaultServerError"])(e,!0)}))},z=function(e){f.value=e},G=function(){Object(l["notifyError"])("Something is wrong. refresh the page and try again!")},q=function(){U()},L=function(){u.value=!0,o["a"].post("account/session",D.value).then((function(e){m["a"].commit("currentUser",e.data),u.value=!1,E.value=null,D.value={}}),(function(e){u.value=!1,Object(l["notifyDefaultServerError"])(e,!0)}))},N=function(){var e={exfields:"member_fields_schema,membership_plans"};o["a"].get("cycling_org/organization/".concat(A),{params:e}).then((function(e){y.value=e.data,V.value=e.data.membership_plans||[],O.value=e.data.member_fields_schema||[],O.value.forEach((function(e){e.multiple&&Object(r["K"])(C.value,e.name,C.value[e.name]||[])}))}),(function(e){Object(l["notifyDefaultServerError"])(e,!0)}))},H=function(){T.value?(k.value=!0,I.value.submit()):Y()},Y=function(e){if(T.value&&!e)return Object(l["notifyWarn"])("Payment is required!");if(!x.value)return Object(l["notifyWarn"])("Select a membership plan!");k.value=!0;var t={turnstile_token:f.value,membership:{member_fields:C.value,token:e,plan_id:x.value.id,donation:j.value}};"sign-up"===E.value&&(t.register=B.value),o["a"].post("cycling_org/organization/".concat(A,"/signup_and_join"),t).then((function(e){k.value=!1;var t="You ".concat(M.value?"Renewed membership":"Joined"," successfully.");e.data._member._user.is_active||(t+=" You have to activate your account before login. Activation link sent to your email! please check your email."),Object(l["notifySuccess"])(t,0),a.push({name:h["b"].PUBLIC_ORG_PROFILE,params:{record_id:A}})}),(function(e){k.value=!1,Object(l["notifyDefaultServerError"])(e,!0)}))},K=function(e){Y(e.id)},U=function(){if(!m["a"].getters.isAuthenticated)return w.value=null,void(C.value={});o["a"].get("cycling_org/organization/".concat(A,"/join")).then((function(e){w.value=e.data,C.value=Object.assign({},C.value,w.value.member_fields)}),(function(e){404===e.response.status?w.value=null:Object(l["notifyDefaultServerError"])(e,!0)}))};return{turnstileToken:f,logining:u,showBirthDateMenu:v,birthDateActivePicker:b,birthDatePickerRef:g,accountMode:E,loginForm:D,registerForm:B,organization:y,joining:k,alreadyJoined:M,schema:O,membershipPlans:V,memberFields:C,uiFieldsData:$,cardPaymentRef:I,stripeElementIsReady:P,membershipPrice:T,stripePubKey:F,formValid:S,currentMembership:w,selectedPlan:x,donateValue:j,loadGlobalConfKeys:J,turnstileSiteKey:R,onVerifyTurnstile:z,onFailTurnstile:G,join:Y,login:L,onSubmit:H,loadOrganization:N,tokenCreated:K,isPasswordVisible:_,rules:{required:c["d"],confirmedValidator:c["a"],emailValidator:c["b"]},icons:{mdiLinkVariant:s["zb"],mdiAlertOutline:s["m"],mdiLogin:s["Eb"],mdiClose:s["O"],mdiEyeOutline:s["bb"],mdiEyeOffOutline:s["ab"],mdiCalendar:s["u"],mdiPhoneOutline:s["Nb"],mdiEmailOutline:s["Y"],mdiAccountCheck:s["c"]}}}},T=A,M=(i("8976"),i("0798")),J=i("8212"),z=i("8336"),G=i("5530"),q=(i("7e58"),i("604c")),L=q["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return q["a"].options.computed.classes.call(this)}},methods:{genData:q["a"].options.methods.genData}}),N=i("a9ad"),H=i("58df"),Y=Object(H["a"])(L,N["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(G["a"])(Object(G["a"])({},L.options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var e=this.setTextColor(this.color,Object(G["a"])({},L.options.methods.genData.call(this)));return this.group?e:this.setBackgroundColor(this.backgroundColor,e)}}}),K=i("b0af"),U=i("99d9"),W=i("cc20"),Z=i("ce7e"),Q=i("4bd4"),X=i("adda"),ee=i("b974"),te=i("2fa4"),ie=Object(y["a"])(T,n,a,!1,null,"1471640a",null);t["default"]=ie.exports;w()(ie,{VAlert:M["a"],VAvatar:J["a"],VBtn:z["a"],VBtnToggle:Y,VCard:K["a"],VCardActions:U["a"],VCardText:U["c"],VCardTitle:U["d"],VChip:W["a"],VCol:k["a"],VDatePicker:O["a"],VDivider:Z["a"],VForm:Q["a"],VIcon:j["a"],VImg:X["a"],VMenu:F["a"],VRow:$["a"],VSelect:ee["a"],VSpacer:te["a"],VTextField:P["a"]})},"7e58":function(e,t,i){},8976:function(e,t,i){"use strict";i("c5ef")},"9d01":function(e,t,i){},a844:function(e,t,i){"use strict";var n=i("5530"),a=(i("a9e3"),i("acd8"),i("e25e"),i("4795"),i("1681"),i("8654")),s=i("58df"),r=Object(s["a"])(a["a"]);t["a"]=r.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return Object(n["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},a["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{autoGrow:function(e){var t=this;this.$nextTick((function(){var i;e?t.calculateInputHeight():null==(i=t.$refs.input)||i.style.removeProperty("height")}))},lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var e=this.$refs.input;if(e){e.style.height="0";var t=e.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(i,t)+"px"}},genInput:function(){var e=a["a"].options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput:function(e){a["a"].options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},ac7c:function(e,t,i){"use strict";var n=i("15fd"),a=i("5530"),s=(i("d401"),i("0d03"),i("d3b7"),i("25f0"),i("6ca7"),i("ec29"),i("9d26")),r=i("c37a"),o=i("fe09"),l=["title"];t["a"]=o["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(e){var t=this;this.$nextTick((function(){return t.inputIndeterminate=e}))},inputIndeterminate:function(e){this.$emit("update:indeterminate",e)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var e=this.attrs$,t=(e.title,Object(n["a"])(e,l));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(s["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},t),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}})},b73d:function(e,t,i){"use strict";var n=i("15fd"),a=i("5530"),s=(i("0481"),i("4069"),i("ec29"),i("9d01"),i("fe09")),r=i("c37a"),o=i("c3f0"),l=i("0789"),c=i("490a"),u=i("80d2"),d=["title"];t["a"]=s["a"].extend({name:"v-switch",directives:{Touch:o["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var e=this.attrs$,t=(e.title,Object(n["a"])(e,d));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},this.attrs),t)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(l["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(c["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===u["z"].left&&this.isActive||e.keyCode===u["z"].right&&!this.isActive)&&this.onChange()}}})},c5ef:function(e,t,i){},ec29:function(e,t,i){},fe09:function(e,t,i){"use strict";i.d(t,"b",(function(){return o}));i("277d"),i("45fc"),i("d3b7"),i("d401"),i("0d03"),i("25f0"),i("4de4");var n=i("c37a"),a=i("5311"),s=i("8547"),r=i("58df");function o(e){e.preventDefault()}t["a"]=Object(r["a"])(n["a"],a["a"],s["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var e=this,t=this.value,i=this.internalValue;return this.isMultiple?!!Array.isArray(i)&&i.some((function(i){return e.valueComparator(i,t)})):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,i):Boolean(i):this.valueComparator(i,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel:function(){var e=n["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:o},e):e},genInput:function(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:o},ref:"input"})},onBlur:function(){this.isFocused=!1},onClick:function(e){this.onChange(),this.$emit("click",e)},onChange:function(){var e=this;if(this.isInteractive){var t=this.value,i=this.internalValue;if(this.isMultiple){Array.isArray(i)||(i=[]);var n=i.length;i=i.filter((function(i){return!e.valueComparator(i,t)})),i.length===n&&i.push(t)}else i=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(i,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(i,t)?null:t:!i;this.validate(!0,i),this.internalValue=i,this.hasColor=i}},onFocus:function(){this.isFocused=!0},onKeydown:function(e){}}})}}]);
//# sourceMappingURL=chunk-5b631488.2811eef1.js.map